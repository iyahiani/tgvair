<ui:composition template="/pages/template/layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<ui:define name="contenu">
		
		
		<p:ajaxStatus onstart="PF('statusDialog').show()"
            onsuccess="PF('statusDialog').hide()" />
            <p:dialog widgetVar="statusDialog" modal="true" draggable="false"
            closable="false" resizable="false" showHeader="false">
            <p:graphicImage name="/private/image/enregistrement.gif" />
        </p:dialog>
            <p:messages id="idPageMessages" autoUpdate="true" closable="true" redisplay="false"
                showDetail="true"  globalOnly="false" />

        
		<p:fieldset legend="#{msg.p_header_ajustement_legend}"
			styleClass="fieldSet">
			<div class="ui-grid-responsive">
				<p:panel header="#{msg.p_header_ajustement}"
					style="margin-bottom:20px">
					<div class="ui-grid ui-grid-responsive">
						<h:form>
							<p:selectOneMenu valueChangeListener="#{ajustement.valueChanged}"
								onchange="submit()">
								<f:selectItem itemLabel="Selectionnez un train"
									itemValue="#{null}" />

								<f:selectItems var="train" value="#{ajustement.listTrains}"
									itemLabel="#{train.toString()}" itemValue="#{train.idTrain}" />
							</p:selectOneMenu>
						</h:form>
					</div>
					<div class="ui-grid ui-grid-responsive">
						<h:form>

							<div class="ui-grid-row">
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_0.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_0.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_0.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_0">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_1.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_1.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_1.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_1">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_2.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_2.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_2.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_2">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_3.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_3.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_3.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_3">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
							</div>
							<div class="ui-grid-row">
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_4.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_4.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_4.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_4">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_5.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_5.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_5.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_5">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_6.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_6.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_6.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_6">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_7.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_7.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_7.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_7">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
							</div>
							<div class="ui-grid-row">
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_8.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_8.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_8.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_8">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_9.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_9.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_9.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_9">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_10.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_10.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_10.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_10">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
								<div class="ui-grid-col-3" style="padding: 5px; float: left">
									<div style="padding-left: 40%;">
										<h3>#{ajustement.schedule_11.name}</h3>
									</div>
									<p:schedule styleClass="td_table_css_ajustement"
										value="#{ajustement.schedule_11.schedule}" draggable="false"
										resizable="false" tooltip="true" view="month"
										initialDate="#{ajustement.schedule_11.initialDate}"
										ignoreTimezone="false" allDay="true" showHeader="false"
										editable="true" widgetVar="myschedule_11">
										<p:ajax event="eventSelect"
											listener="#{ajustement.onEventSelect}" update="eventDetails"
											oncomplete="PF('eventDialog').show();" />
									</p:schedule>
								</div>
							</div>
							<p:dialog widgetVar="eventDialog" header="Jour de circulation"
								showEffect="clip" hideEffect="clip" closable="true">
								<p:ajax event="close" listener="#{ajustement.dialogClose}" />
								<h:panelGrid id="eventDetails" columns="2">
									<p:outputLabel for="idCatalogueTrain" value="Train N°: " />
									<p:inputText id="idCatalogueTrain"
										value="#{ajustement.event.idCatalogueTrain}" disabled="true" />

									<p:outputLabel for="startDate" value="Date :" />
									<p:calendar id="startDate"
										value="#{ajustement.event.startDate}" pattern="dd/MM/yyyy"
										disabled="true" />

									<p:outputLabel for="heureDepart" value="Départ :" />
									<p:calendar id="heureDepart"
										value="#{ajustement.event.heureDepart}" timeZone="GMT+1"
										pattern="HH:mm" />

									<p:outputLabel for="heureArrivee" value="Arrivée : " />
									<p:calendar id="heureArrivee"
										value="#{ajustement.event.heureArrivee}" timeZone="GMT+1"
										pattern="HH:mm" />

									<p:outputLabel for="flagCirculation" value="Circulant: " />
									<h:selectBooleanCheckbox id="flagCirculation"
										value="#{ajustement.event.flagCirculation}" />

									<p:commandButton type="reset" value="Reset" />
									<p:commandButton id="addButton" value="Save"
										actionListener="#{ajustement.addEvent}"
										oncomplete="PF('myschedule_0').update();
								PF('myschedule_1').update();PF('myschedule_2').update();PF('myschedule_3').update();PF('myschedule_4').update();PF('myschedule_5').update();
								PF('myschedule_6').update();PF('myschedule_7').update();PF('myschedule_8').update();PF('myschedule_9').update();
								PF('myschedule_10').update();PF('myschedule_11').update();PF('eventDialog').hide();" ajax="true">
								
								</p:commandButton>
								</h:panelGrid>
							</p:dialog>
						</h:form>
					</div>
					<div class="ui-grid ui-grid-responsive">
						<p:commandButton id="saveAdapt" value="Sauvegarder"
							actionListener="#{ajustement.saveAdaptation()}">
						</p:commandButton>
						<p:commandButton id="cancelAdapt" value="Annuler"
							actionListener="#{ajustement.initSelectedTrain()}"
							oncomplete="PF('myschedule_0').update();
                                PF('myschedule_1').update();PF('myschedule_2').update();PF('myschedule_3').update();PF('myschedule_4').update();PF('myschedule_5').update();
                                PF('myschedule_6').update();PF('myschedule_7').update();PF('myschedule_8').update();PF('myschedule_9').update();
                                PF('myschedule_10').update();PF('myschedule_11').update();">
						</p:commandButton>
					</div>
				</p:panel>
			</div>
		</p:fieldset>
		<br />
	</ui:define>
	<script type="text/javascript">
		
	</script>
</ui:composition>

